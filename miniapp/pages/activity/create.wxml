<!--pages/activity/create.wxml-->
<view class="container">
  <view class="form">
    <view class="form-item">
      <text class="label">活动名称</text>
      <input class="input" type="text" placeholder="例如：周末聚餐" value="{{name}}" bindinput="onNameInput" maxlength="20" />
    </view>
    
    <view class="form-item">
      <text class="label">活动类型</text>
      <view class="type-tags">
        <view wx:for="{{commonTypes}}" wx:key="*this" class="type-tag {{type === item ? 'active' : ''}}" bindtap="selectType" bindlongpress="deleteType" data-type="{{item}}">
          {{item}}
        </view>
      </view>
      <input class="input" type="text" placeholder="或输入新类型" value="{{type}}" bindinput="onTypeInput" bindblur="onTypeBlur" maxlength="10" />
    </view>
    
    <view class="form-item">
      <text class="label">参与成员（<text class="label-highlight">输入姓名，每行一个</text>）</text>
      <view class="hint">提示：创建者（{{creator}}）会自动添加在第一位，且不可删除</view>
      <textarea class="textarea textarea-members" placeholder="每行输入一个成员姓名" value="{{membersText}}" bindinput="onMembersInput" />
    </view>
    
    <view class="form-item">
      <text class="label">备注</text>
      <textarea class="textarea" placeholder="可选（最多20个汉字）" value="{{remark}}" bindinput="onRemarkInput" auto-height="{{false}}" maxlength="20" />
    </view>
    
    <view wx:if="{{showPrepaidOption}}" class="form-item">
      <view class="switch-item">
        <text class="switch-label">打平伙</text>
        <switch checked="{{isPrepaid}}" bindchange="togglePrepaid" disabled="{{isEdit && originalIsPrepaid}}" />
      </view>
      <view wx:if="{{isEdit && originalIsPrepaid}}" class="switch-hint">创建时已选择打平伙，不可修改</view>
    </view>
    
    <view wx:if="{{isPrepaid}}" class="form-item">
      <text class="label">保管人员</text>
      <view class="keeper-tags">
        <view wx:for="{{keeperList}}" wx:key="name" class="keeper-tag {{keeper === item.name ? 'active' : ''}}" bindtap="selectKeeper" data-name="{{item.name}}">
          {{item.name}}
        </view>
      </view>
    </view>
    
    <button class="btn btn-full" bindtap="saveActivity">{{isEdit ? '更新' : '创建'}}</button>
  </view>
</view>


