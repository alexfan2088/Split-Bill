<!--pages/recharge/add.wxml-->
<view class="container">
  <view class="form">
    <view class="form-item">
      <text class="label">金额（元）</text>
      <input class="input" type="digit" placeholder="0.00" value="{{amount}}" bindinput="onAmountInput" disabled="{{isReadOnly}}" />
    </view>

    <view class="form-item">
      <text class="label">日期</text>
      <picker mode="date" value="{{date}}" bindchange="onDateChange" disabled="{{isReadOnly}}">
        <view class="picker {{isReadOnly ? 'picker-disabled' : ''}}">{{date || '选择日期'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">预存人</text>
      <view class="payer-tags">
        <view wx:for="{{payerList}}" wx:key="name" class="payer-tag {{selectedPayer === item.name ? 'active' : ''}} {{isReadOnly ? 'payer-tag-disabled' : ''}}" bindtap="{{isReadOnly ? '' : 'selectPayer'}}" data-name="{{item.name}}">
          {{item.name}}
        </view>
      </view>
    </view>

    <view class="form-item">
      <text class="label">记录人</text>
      <view class="recorder-display">
        <text class="recorder-name">{{currentUser}}</text>
      </view>
      <view class="hint">记录人默认为当前登录用户</view>
    </view>

    <view class="form-item">
      <text class="label">保管人员</text>
      <view class="keeper-display">
        <text class="keeper-name">{{keeper || '未设置'}}</text>
      </view>
      <view class="hint">保管人员由活动创建时设置，不可修改</view>
    </view>

    <button wx:if="{{!isReadOnly}}" class="btn btn-full" bindtap="saveRecharge">{{isEdit ? '更新充值' : '保存充值'}}</button>
    <button wx:else class="btn btn-full" bindtap="goBack">返回</button>
  </view>
</view>

