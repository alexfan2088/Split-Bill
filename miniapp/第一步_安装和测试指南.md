# 第一步：安装和测试指南

## 📋 准备工作清单

- [ ] 安装微信开发者工具
- [ ] 注册/登录微信开发者账号
- [ ] 导入小程序项目
- [ ] 配置云开发环境
- [ ] 测试运行

---

## 步骤 1：安装微信开发者工具

### 1.1 下载安装包

1. 打开浏览器，访问：https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
2. 根据你的操作系统（Windows/Mac）下载对应版本
3. 下载完成后，双击安装包进行安装

### 1.2 安装过程

- 按照安装向导提示，点击"下一步"
- 选择安装路径（默认即可）
- 等待安装完成
- 安装完成后，桌面会出现"微信开发者工具"图标

---

## 步骤 2：登录微信开发者工具

### 2.1 打开工具

1. 双击桌面上的"微信开发者工具"图标
2. 首次打开会要求登录

### 2.2 登录方式

**方式一：使用微信扫码登录（推荐）**
- 点击"使用微信扫码登录"
- 用手机微信扫描二维码
- 在手机上确认登录

**方式二：使用账号密码登录**
- 如果你有微信开发者账号，可以直接输入账号密码登录

### 2.3 如果没有开发者账号

1. 访问：https://mp.weixin.qq.com/
2. 点击"立即注册"
3. 选择"小程序"
4. 按照提示完成注册（需要邮箱、手机号等）

**注意**：如果没有注册，也可以先使用"测试号"进行开发测试。

---

## 步骤 3：创建/导入小程序项目

### 3.1 打开微信开发者工具

1. 登录成功后，会看到主界面
2. 点击左上角的"+"号或"新建项目"

### 3.2 导入项目

1. 在"新建项目"对话框中：
   - **项目名称**：填写 `Split-Bill-Miniapp`（或你喜欢的名字）
   - **目录**：点击"选择"，浏览到 `C:\dev\Split-bill\miniapp` 目录
   - **AppID**：
     - 如果有小程序AppID，填写你的AppID
     - 如果没有，选择"测试号"（下拉选择）
   - **开发模式**：选择"小程序"
   
2. 点击"新建"

### 3.3 如果提示"目录不为空"

- 这是正常的，因为我们已经在 `miniapp` 目录中创建了文件
- 直接点击"确定"即可

---

## 步骤 4：配置云开发环境

### 4.1 打开 app.js 文件

1. 在微信开发者工具左侧的文件树中
2. 找到 `app.js` 文件
3. 双击打开

### 4.2 检查环境ID

找到这一行代码：
```javascript
env: 'cloud1-0g37deo4d3db8310',
```

**重要**：
- 这个环境ID应该和你的 Web 版本使用同一个
- 如果不同，需要替换为你的云开发环境ID

### 4.3 如何获取云开发环境ID？

1. 访问：https://console.cloud.tencent.com/tcb
2. 登录你的腾讯云账号
3. 找到你的云开发环境
4. 复制环境ID

---

## 步骤 5：测试运行

### 5.1 编译项目

1. 在微信开发者工具中，点击顶部工具栏的"编译"按钮（或按 `Ctrl+B`）
2. 等待编译完成
3. 如果编译成功，右侧模拟器会显示小程序界面

### 5.2 测试登录功能

1. 在模拟器中，你应该能看到登录页面
2. 输入一个用户名（例如：`测试用户`）
3. 点击"登录/注册"按钮
4. 如果成功，会显示"登录成功"的提示，并跳转到活动列表页面

### 5.3 测试创建活动

1. 在活动列表页面，点击"+ 创建活动"按钮
2. 填写活动信息：
   - 活动名称：例如 `周末聚餐`
   - 活动类型：例如 `聚餐`
   - 参与成员：每行一个，例如：
     ```
     张三
     李四
     王五
     ```
3. 点击"创建"按钮
4. 如果成功，会返回活动列表，并显示新创建的活动

### 5.4 测试添加账单

1. 点击一个活动，进入活动详情页
2. 在"账单"Tab中，点击"+ 添加账单"按钮
3. 填写账单信息：
   - 金额：例如 `100`
   - 账单名称：例如 `晚餐`
   - 选择日期和时间
   - 选择付款人
   - 为每个成员选择权重（0-3）
4. 点击"保存账单"按钮
5. 如果成功，会返回活动详情页，并显示新添加的账单

---

## 常见问题排查

### ❌ 问题 1：编译失败，提示"找不到 app.json"

**原因**：项目路径不正确或文件缺失

**解决方法**：
1. 检查 `miniapp` 目录下是否有 `app.json` 文件
2. 确认导入项目时选择的目录是正确的 `miniapp` 目录

### ❌ 问题 2：云开发初始化失败

**原因**：环境ID不正确或未开通云开发

**解决方法**：
1. 检查 `app.js` 中的环境ID是否正确
2. 确认该环境ID对应的云开发环境已开通
3. 在微信开发者工具中，点击顶部菜单"云开发" → "开通云开发"（如果是新账号）

### ❌ 问题 3：登录后提示"数据库未初始化"

**原因**：云开发环境未正确初始化

**解决方法**：
1. 在微信开发者工具中，点击顶部菜单"云开发"
2. 打开云开发控制台
3. 确认数据库集合已创建（`users`、`activities`、`bills`、`groups`）

### ❌ 问题 4：页面显示空白或报错

**原因**：代码有语法错误或路径配置错误

**解决方法**：
1. 查看控制台（Console）的错误信息
2. 检查 `app.json` 中的页面路径是否正确
3. 确认所有页面文件都存在

### ❌ 问题 5：真机预览时无法连接

**原因**：网络问题或配置问题

**解决方法**：
1. 确保手机和电脑在同一网络
2. 在微信开发者工具中，点击"预览"按钮
3. 用手机微信扫描生成的二维码

---

## 下一步

测试成功后，你可以：

1. **继续开发**：根据需求添加新功能
2. **优化样式**：调整UI样式，使其更美观
3. **真机测试**：在真实手机上测试所有功能
4. **发布上线**：完成开发后，可以提交审核并发布

---

## 需要帮助？

如果遇到问题：
1. 查看控制台的错误信息
2. 检查本文档的"常见问题排查"部分
3. 查看微信小程序官方文档：https://developers.weixin.qq.com/miniprogram/dev/framework/




