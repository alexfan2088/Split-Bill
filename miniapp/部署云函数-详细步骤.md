# 部署云函数 - 详细步骤

## 🎯 目标

部署 `login` 云函数，绕过数据库权限问题。

## ✅ 部署步骤

### 方法一：在微信开发者工具中部署（推荐）

#### 步骤1：找到云函数文件夹

1. **在微信开发者工具左侧的文件树中**
2. **找到 `cloudfunctions` 文件夹**
3. **展开，应该能看到 `login` 文件夹**

#### 步骤2：上传云函数

1. **右键点击 `login` 文件夹**
2. **查看右键菜单，查找以下选项之一**：
   - "上传并部署：云端安装依赖"
   - "上传并部署：所有文件"
   - "上传并部署"
   - "部署"
   - "Upload and Deploy"
3. **点击该选项**
4. **等待上传完成**（会显示进度）

#### 步骤3：如果找不到上传选项

如果右键菜单中没有上传选项，可能需要：

1. **在微信开发者工具顶部菜单栏**
2. **查找"云开发"或"Cloud"菜单**
3. **查看是否有"上传云函数"选项**

---

### 方法二：通过云开发控制台部署

如果方法一不行，可以尝试：

1. **访问云开发控制台**：https://console.cloud.tencent.com/tcb
2. **选择环境**：`cloud1-0g37deo4d3db8310`
3. **点击左侧菜单的"云函数"**
4. **点击"新建云函数"**
5. **上传 `cloudfunctions/login` 文件夹中的文件**

---

### 方法三：使用命令行部署（如果安装了CLI）

如果你安装了云开发CLI：

```bash
cd miniapp/cloudfunctions/login
tcb fn deploy login
```

---

## 🔍 检查部署是否成功

### 方法1：在微信开发者工具中查看

1. **如果找到了"云开发"相关菜单**
2. **查看云函数列表**
3. **确认 `login` 函数是否存在**

### 方法2：在云开发控制台查看

1. **访问云开发控制台**
2. **点击"云函数"**
3. **查看函数列表**
4. **确认 `login` 函数是否存在**

### 方法3：测试调用

部署完成后，重新测试登录功能。如果云函数部署成功，应该不会再报权限错误。

---

## 🚀 现在请尝试

1. **在微信开发者工具中，找到 `cloudfunctions/login` 文件夹**
2. **右键点击，查看右键菜单**
3. **告诉我你看到了哪些选项？**

---

## 💡 如果无法部署

如果无法部署云函数，可能需要：

1. **在微信开发者工具中开通云开发**
   - 虽然之前找不到"云开发"按钮，但可能需要通过其他方式开通

2. **或者联系腾讯云客服**
   - 询问如何授权小程序AppID到这个环境
   - 或者如何部署云函数

---

## 📋 部署后的测试

部署成功后：

1. **重新编译小程序**（点击"编译"按钮）
2. **测试登录功能**
3. **如果成功，应该不会再报权限错误**



